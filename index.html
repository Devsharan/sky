<!DOCTYPE html>
<html lang="en" ng-app="bygApp">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Book Your Ground</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <!--<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>-->

    <!-- Custom styles for this template -->
    <link href="css/main.css" rel="stylesheet">
    <script type="text/javascript" src="js/angular.js"></script>
    <script type="text/javascript" src="js/angular-route.js"></script>
    <script type="text/javascript" src="js/ui-bootstrap-tpls-0.12.1.js"></script>
    <script type="text/javascript">
        var sports = {
            "sportsName": [
                {
                    "name": "Cricket"
                },
                {
                    "name": "Tennis"
                },
                {
                    "name": "Football"
                }
            ],
            "locations": [
                {
                    "name": "Bangalore"
                }
            ]
        };
        //ground details
        var groundDetails = [
            {
                "image": "img/1.jpeg",
                "sportsGroundId": "1",
                "name": "Gopalan International School",
                "description": "some description",
                "websiteUrl": "www.dummysite.com",
                "address": "WhiteFiles",
                "coordinates": {
                    "latitude": "'12.98510800'",
                    "longitude": "’77.71768700"
                }
            },
            {
                "image": "img/2.jpeg",
                "sportsGroundId": "2",
                "name": "Gopalan International School",
                "description": "some description",
                "websiteUrl": "www.dummysite.com",
                "address": "WhiteFiles",
                "coordinates": {
                    "latitude": "'12.98510800'",
                    "longitude": "’77.71768700"
                }

            },
            {
                "image": "img/3.jpeg",
                "sportsGroundId": "2",
                "name": "Gopalan International School",
                "description": "some description",
                "websiteUrl": "www.dummysite.com",
                "address": "WhiteFiles",
                "coordinates": {
                    "latitude": "'12.98510800'",
                    "longitude": "’77.71768700"
                }

            }
        ];
        ///slot details json
        var slotDetail = {
            "sportsGroundId": "1",
            "slots": [
                {
                    "startTime": "10:00",
                    "endTime": "11:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                },
                {
                    "startTime": "11:00",
                    "endTime": "12:00",
                    "Rate": "700",
                    "displayText": "Rs.700",
                    "status": "Booked",
                    "selected": false
                },
                {
                    "startTime": "12:00",
                    "endTime": "13:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "NA",
                    "selected": false
                },
                {
                    "startTime": "13:00",
                    "endTime": "14:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                },
                {
                    "startTime": "14:00",
                    "endTime": "15:00",
                    "Rate": "600",
                    "displayText": "Rs.600",
                    "status": "NA",
                    "selected": false
                },
                {
                    "startTime": "15:00",
                    "endTime": "16:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                },
                {
                    "startTime": "16:00",
                    "endTime": "17:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                },
                {
                    "startTime": "17:00",
                    "endTime": "18:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                }, {
                    "startTime": "18:00",
                    "endTime": "19:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                }, {
                    "startTime": "19:00",
                    "endTime": "20:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                }, {
                    "startTime": "20:00",
                    "endTime": "21:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                },
                {
                    "startTime": "21:00",
                    "endTime": "22:00",
                    "Rate": "800",
                    "displayText": "Rs.800",
                    "status": "Available",
                    "selected": false
                }


            ]
        };

        var bygApp = angular.module("bygApp", ["ngRoute", "ui.bootstrap"])
                .config(function ($routeProvider) {
                    $routeProvider.when("/contact-us", {
                        templateUrl: "views/contact-us.html"
                    });

                    $routeProvider.when("/terms-condition", {
                        templateUrl: "views/terms-condition.html"
                    });
                    $routeProvider.when("/privacy-policy", {
                        templateUrl: "views/privacy-policy.html"
                    });
                    $routeProvider.when("/faq", {
                        templateUrl: "views/faq.html"
                    });
                    $routeProvider.when("/how-it-works", {
                        templateUrl: "views/how-it-works.html"
                    });

                    $routeProvider.when("/ground-details", {
                        templateUrl: "views/ground-details.html"
                    });

                    $routeProvider.when("/view-slots", {
                        templateUrl: "views/view-slots.html"
                    });

                    $routeProvider.when("/checkout-summary", {
                        templateUrl: "views/checkout-summary.html"
                    });
                    $routeProvider.when("/support-details", {
                        templateUrl: "views/support-details.html"
                    });


                    $routeProvider.otherwise({
                        templateUrl: "views/home.html"
                    });
                });

        bygApp.controller("bygMainCntlr", function ($scope) {
                    $scope.sports = sports;
                    $scope.groundDetails = groundDetails;
                    $scope.slots = slotDetail;
                    $scope.viewGroundDetails = function () {

                        console.log(groundDetails)
                    };
                    $scope.viewSlots = function () {

                    };
                    $scope.buttonStyle = function (slot) {
                        var slotButtonClass;
                        //  var slot = $scope.currentSelectedSlot ===undefined ? $slot: $scope.currentSelectedSlot;
                        if ((slot.status === "Available") && (slot.selected===true)) {
                            slotButtonClass = "slot ".concat("slot-selected");
                        } else if (slot.status === "Available") {
                            slotButtonClass = "slot ".concat("slot-available");
                        } else if (slot.status !== "Available") {
                            slotButtonClass = "slot ".concat("slot-booked");
                            slot.displayText = slot.status;

                        }

                        return slotButtonClass;
                    }
                    $scope.slotSelectionAction = function (slot) {

                        if ((slot.status === "Available")) {

                            if( (slot.selected===false)) {
                                slot.displayText = "Selected";
                                slot.selected = true;
                            }else{
                                slot.displayText = "Rs.".concat(slot.Rate);
                                slot.selected = false;
                            }

                        }
                    }

                    $scope.selectionCount = function() {
                        var count = 0;
                        angular.forEach($scope.slots.slots, function (slot) {
                            if(slot.selected==true){
                                count++;
                            }
                        });
                        return count;
                    }

                }
        );

        bygApp.controller('DatepickerDemoCtrl', function ($scope) {
            $scope.today = function () {
                $scope.dt = new Date();
            };
            $scope.today();

            $scope.clear = function () {
                $scope.dt = null;
            };

            // Disable weekend selection
            $scope.disabled = function (date, mode) {
                return ( mode === 'day' && ( date.getDay() === 0 || date.getDay() === 6 ) );
            };

            $scope.toggleMin = function () {
                $scope.minDate = $scope.minDate ? null : new Date();
            };
            $scope.toggleMin();

            $scope.open = function ($event) {
                $event.preventDefault();
                $event.stopPropagation();

                $scope.opened = true;
            };

            $scope.dateOptions = {
                formatYear: 'yy',
                startingDay: 1
            };

            $scope.formats = ['dd-MMMM-yyyy', 'yyyy/MM/dd', 'dd.MM.yyyy', 'shortDate'];
            $scope.format = $scope.formats[0];
        });


    </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script>

    </script>
</head>

<body ng-controller="bygMainCntlr">
<header>
    <ng-include src="'views/header.html'"></ng-include>
</header>
<ng-view></ng-view>
<ng-include src="'views/footer.html'"></ng-include>
<!-- Bootstrap core JavaScript
 ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
</body>
</html>